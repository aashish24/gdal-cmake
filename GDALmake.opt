CC	=	gcc

OPTFLAGS =	-O
DBGFLAGS =	-g -DDEBUG

#
#	Whether we use debug flags, or optimization is determined by
#	the CFG environment variable.  Set to debug for debug builds.
#	This is similar to the OGDI builds. 
#
ifeq ($(CFG),debug)
OD_FLAGS =	$(DBGFLAGS)
endif

ifeq ($(CFG),gprof)
OD_FLAGS =	-pg
LNK_FLAGS =	-pg
endif

ifeq ($(OD_FLAGS),)
OD_FLAGS =	$(OPTFLAGS)
endif

CFLAGS	=	-Wall $(OD_FLAGS)

GDAL_INCLUDE	=	-I$(GDAL_ROOT) -I$(GDAL_ROOT)/port -I$(GDAL_ROOT)/core

LIBS		=	-lm

ifeq ($(MAKE_MODE),)
LIBS	:=    -ldl $(LIBS) 
endif

ifeq ($(CFG),debug)
ifneq ($(wildcard /usr/local/include/dbmallo?.h),)
CFLAGS  :=      $(CFLAGS)  -DDBMALLOC
LIBS    :=      $(LIBS) -ldbmalloc
endif
endif

ifneq ($(TOPDIR),)
OGDI_LIBS	=	-L$(TOPDIR)/bin/linux -logdi -lzlib
OGDI_FLAG	=	ENABLED
endif

GDAL_LIBS	=	$(GDAL_ROOT)/frmts/o/*.o \
			$(GDAL_ROOT)/frmts/o/*.a \
			$(OGDI_LIBS) \
			$(GDAL_ROOT)/core/*.o $(GDAL_ROOT)/port/*.o


#
#	Note these codes have to exactly match the format directory names, 
#	and their uppercase form should be the format portion of the
#	format registration entry point.  eg. gdb -> GDALRegister_GDB().
#
GDAL_FORMATS = 	gxf gtiff hfa ogdi aigrid

